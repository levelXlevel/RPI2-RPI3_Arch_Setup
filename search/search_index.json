{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ARCH Linux on PI2B/3B","text":"<p>How I setup ARCH Linux on my RPi2 &amp; RPi3.</p>"},{"location":"#why","title":"Why","text":"<p>You might be asking; In 2023 why maintain these resource constrained devices? Answer; They're good enough for data collection and reporting.</p> <ol> <li>Prometheus; Anything with an exporter gets routed to these devices for collection.</li> <li>Grafan; Because what's the point of collecting data if you can't visualize it?</li> <li>Dabble in other things.</li> </ol>"},{"location":"#hardware","title":"Hardware","text":""},{"location":"#rpi2","title":"RPi2","text":"<ol> <li>Version 1.1</li> <li>1GB RAM</li> <li>52Pi Raspberry Pi Fan Expansion Board w/ 0.91 OLED V1.0</li> <li>SD Card</li> <li>32GB USB Drive</li> <li>UCtronics POE splitter</li> </ol>"},{"location":"#rpi3b","title":"RPi3B","text":"<ol> <li>Version 1.2</li> <li>1GB RAM</li> <li>52Pi Raspberry Pi Fan Expansion Board w/ 0.91 OLED V1.0</li> <li>SD Card</li> <li>32GB USB Drive</li> <li>UCtronics POE splitter</li> </ol>"},{"location":"#getting-started","title":"Getting started","text":"<p>This is just an outline of steps. There are a few ways to perform the first step and everyone has their preferred way. The seconds step is performed by PINN , leaving little of consequence for the user to setup.</p> <ol> <li>Install PINN on the SD card.</li> <li>Install ARCH from the PINN UI onto the USB drive.</li> <li>Reboot</li> <li>Enjoy</li> </ol>"},{"location":"docs/","title":"Post install","text":""},{"location":"docs/#first-boot","title":"First Boot","text":""},{"location":"docs/#objectives","title":"Objectives","text":"<ol> <li>Reset default passwords</li> <li>Change hostname</li> <li>Initialize package manager</li> <li>Upgrade the system</li> <li>Reboot</li> </ol>"},{"location":"docs/#steps","title":"Steps","text":"<ol> <li>Login as default user <p>ssh alarm@alarmpi</p> </li> <li>SU as root <p>su -</p> </li> <li>Change password for root &amp; default user <p>passwd root passwd alarm</p> </li> <li>Change hostname <p>hostnamectl hostname <code>new_hostname</code></p> </li> <li>Init keys <p>pacman-key --init pacman-key --populate archlinuxarm</p> </li> <li>Update the system <p>pacman -Syu --noconfirm</p> </li> <li>Reboot <p>reboot</p> </li> </ol>"},{"location":"docs/#second-boot","title":"Second boot","text":""},{"location":"docs/#objectives_1","title":"Objectives","text":"<ol> <li>Add new groups</li> <li>Add new users</li> <li>Install critical software</li> <li>Add user/s to sudoer</li> <li>Setup AUR</li> <li>Configure Pi</li> </ol>"},{"location":"docs/#steps_1","title":"Steps","text":"<ol> <li>Add Groups</li> <li>Add system groups<ol> <li>groupadd -r docker</li> <li>groupadd -r ansible</li> </ol> </li> <li>Add regular groups<ol> <li>groupadd pi</li> <li>groupadd <code>username</code></li> </ol> </li> <li>Add new users</li> <li>useradd -m -g pi -G wheel,users,docker pi</li> <li>useradd -m -g ansible -G wheel,users,docker ansible</li> <li>useradd -m -g <code>username</code> -G wheel,users <code>username</code></li> <li>Change shells if needed/desired<ol> <li>usermod --shell /bin/bash <code>username</code></li> </ol> </li> <li>Install software <p>pacman -S \u2013noconfirm sudo vim base-devel git go</p> </li> <li>Add default user to sudoer <p>echo \u201calarm ALL=NOPASSWD: ALL\u201d &gt;/etc/sudoers.d/000-users</p> </li> <li>Add any additional users to sudoer</li> <li> <p>Setup AUR as non-root user</p> </li> <li> <p>Exit <code>root</code> and return to regular user</p> </li> <li> <p>Install Yay</p> <p>rm -rf /tmp/yay-bin</p> <p>git clone https://aur.archlinux.org/yay-bin.git /tmp/yay-bin</p> <p>cd /tmp/yay-bin</p> <p>makepkg -si</p> </li> <li> <p>Install packages (Replaces previously installed vi package)</p> <p>yay -S --noconfirm vi-vim-symlink usbutils lshw</p> <p>[OPTIONAL]</p> <ul> <li>ansible</li> <li>docker docker-compose</li> <li>hwinfo</li> </ul> </li> <li> <p>Configure Pi</p> </li> <li>Install some useful packages       &gt; yay -S --noconfirm raspi-config-git i2c-tools lm_sensors</li> <li>Use raspi-config to adjust pi<ol> <li>Locale</li> <li>Timezone</li> <li>Interfacing</li> <li>SPI</li> <li>I2C</li> <li>Advance</li> <li>Expand Filesystem</li> <li>Memory Split = 16</li> </ol> </li> <li>Configure Bash</li> <li>Install a few tools/utilities       &gt; yay -S --noconfirm find-the-command fzf fastfetch</li> <li>Add stuff to bash_profile       &gt; vi ~/.bash_profile       <code>fastfetch       source /usr/share/doc/find-the-command/ftc.bash</code></li> </ol>"},{"location":"docs/#how-to","title":"How To","text":""},{"location":"docs/#docker","title":"Docker","text":"<pre><code>yay -S --noconfirm docker docker-compose\nsudo systemctl enable \u2013now docker\n</code></pre>"},{"location":"docs/#grafana","title":"Grafana","text":"<pre><code>yay -S --noconfirm grafana-bin\nsudo systemctl enable --now grafana\n</code></pre>"},{"location":"docs/#prometheus-exporters","title":"Prometheus Exporters","text":""},{"location":"docs/#install","title":"Install","text":"<pre><code>yay -S --noconfirm prometheus prometheus-node-exporter\nsudo systemctl enable --now prometheus prometheus-node-exporter\n</code></pre>"},{"location":"docs/#additional-exporters","title":"Additional Exporters","text":"<pre><code>yay -S --noconfirm prometheus-blackbox-exporter\nsudo systemctl enable --now prometheus-blackbox-exporter\nyay -S --noconfirm prometheus-speedtest-exporter\nyay -S --noconfirm prometheus-ping-exporter\nsudo systemctl enable --now prometheus-ping-exporter\n</code></pre>"},{"location":"docs/#enable-admin","title":"Enable Admin","text":"<p>TBD</p>"},{"location":"docs/#disable-package-compression","title":"Disable package compression","text":"<p>sudo vi /etc/makepkg.conf</p> <p>Change PKGEXT to just <code>tar</code> without compressing package.</p> <pre><code>#PKGEXT='.pkg.tar.zst'\n#PKGEXT='.pkg.tar.xz\u201d'\nPKGEXT='.pkg.tar'\n</code></pre>"},{"location":"docs/#additional-packages","title":"Additional packages","text":"<p>yay -S --noconfirm pacman-updatedb-hook</p>"}]}